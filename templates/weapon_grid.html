<div class="weapon-grid">
    {% for weapon in weapons %}
    <div {{weapon[1]}}>
        {% if title == "main" %}
        {% set image = weapon[1] %}
        {% else %}
        {% set image = weapon[0] %}
        {% endif %}
        {% if weapon[0] != selected_weapon[0] %}
        <a href="/{{title}}/{{page}}/{{weapon[0]}}"><img src="/static/{{title}}_weapon/{{image}}.png" alt="{{weapon[1]}}" class="weapon-img" onerror="this.onerror=null;this.src='/static/other_images/loading.gif'"></a>
        {% else %}
        <a href="/{{title}}/{{page}}/0"><img src="/static/{{title}}_weapon/{{image}}.png" alt="{{weapon[1]}}" class="weapon-img" onerror="this.onerror=null;this.src='/static/other_images/loading.gif'"></a>
        {% endif %}
    </div>
    {% endfor %}

    {% if page == 1 %}
    <div back class="weapon-back-button"><a href="/{{title}}/{{total_pages}}/{{selected_weapon[0]}}">back</a></div>
    {% else %}
    <div back class="weapon-back-button"><a href="/{{title}}/{{page-1}}/{{selected_weapon[0]}}">back</a></div>
    {% endif %}
    {% if page >= total_pages %}
    <div next class="weapon-next-button"><a href="/{{title}}/{{1}}/{{selected_weapon[0]}}">next</a></div>
    {% else %}
    <div next class="weapon-next-button"><a href="/{{title}}/{{page+1}}/{{selected_weapon[0]}}">next</a></div>
    {% endif %}
</div>